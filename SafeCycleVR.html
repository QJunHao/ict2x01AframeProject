<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>SafeCycleVR</title>
    <script src="https://aframe.io/releases/0.5.0/aframe.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.13.1/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-aabb-collider-component@^2.2.1/dist/aframe-aabb-collider-component.min.js"></script>
    <script src="./aabbCollider/EventSet.js"></script>
    <script src="./aabbCollider/Collider.js"></script>
    <script src="cubeComponent.js"></script>
    <script src="navComponent.js"></script>
    <script src="flagComponent.js"></script>
    <script src="playerComponent.js"></script>
    
    <script>
      AFRAME.registerComponent('overlay-visibility', {
        init: function () {
          if (!this.el.isMobile) {
            document.querySelector('#about').style.display = 'block';
          }
        }
      });
    </script>
    <style>
        #about {
            display: none;
            position: absolute;
            z-index: 7001;
            width: 300px;
            top: 40px;
            right: 40px;
            font: 14px 'Voces', Arial, sans-serif;
            color: white;
            line-height: 1.3rem;
            background: rgba(0,0,0,0.2);
            padding: 1rem;
            box-sizing: border-box;
            display: block;
        }

        #about p:last-child{
        margin: 0;
        }

        #about b{
          font-weight: bold;
          font-family: monospace;
        }

        @media (max-width: 400px), (max-height: 300px) {
            #about {
                left: 5%;
                top: 5%;
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <div id="about">
        <p id = "hp">Current damage: 0</p>
    </div>
    <a-scene>
        <a-assets>
            <img id = "ground" src="asset/ground.jpg">
            <img id = "road" src="asset/road.jpg">
            <img id = "zebra" src="asset/zebra.jpg">
            <img id = "walkway" src="asset/walkway.jpg">
            <img id = "pedestrian" src="asset/pedestrian.jpg">
            <img id = "junction" src="asset/junction.jpg">
            <img id = "bikelane" src="asset/bikelane.jpg">
            <img id = "bikepark" src="asset/bikepark.png">
            <img id = "building" src="asset/building.jpg">
            <img id = "tree" src="asset/tree.jpg">
            <img id = "fence" src="asset/fence.jpg">
            <img id = "slides" src="asset/slides.jpg">
            <img id = "swing" src="asset/swing.jpg">
            <img id = "coffee" src="asset/coffee.jpg">
            <img id = "toy" src="asset/toy.jpg">
            <img id = "grey" src="asset/grey.jpg">
            <img id = "carpark" src="asset/carpark.jpg">
            <img id = "shared" src="asset/shared.png">
            <img id = "walkingpedestrian" src="asset/walkingpedestrian.jpg">
            <img id = "bicycle" src="asset/bicycle.jpg">
            <img id = "checkpoint" src="asset/checkpoint.png">
            <img id = "clear" src="asset/clear.jpg">
            <img id = "flag" src="asset/flag.jpg">
            <img id = "exit" src="asset/exit.jpg">
            <img id = "play" src="asset/play.jpg">
            <img id = "tutorial" src="asset/tutorial.jpg">
            <a-asset-item id="car-obj" src="asset/3dcar.obj"></a-asset-item>
            <a-asset-item id="car-mtl" src="asset/3dcar.mtl"></a-asset-item>
        </a-assets>
        <a-entity id="player"
            camera
            universal-controls
            kinematic-body
            position="-85 1.5 45">
            <a-box class = "player"
                player = "name: Player"
                id = "Player"
                color="white"
                collision = "0";
                aabb-collider="objects: .car, .nonbike; interval: 0"
                height="0.5" width="0.5" depth = "2"
                static-body
                event-set__hitstart="opacity: 0.5; color: orange" 
                event-set__hitend="opacity: 1; color: white" >
            </a-box>
        </a-entity>
        <a-plane width="200" height="100" rotation="-90 0 0"  material="transparent: true; opacity: 0;" static-body position = "0 0.1 0"></a-plane>
        <!-------------------------------------------border-------------------------->
        <a-plane src="#ground" width="10" height="100" rotation="-90 0 0" static-body position = "-95 0 0"></a-plane>
        <a-plane src="#ground" width="10" height="100" rotation="-90 0 0" static-body position = "95 0 0"></a-plane>
        <a-plane src="#ground" width="10" height="200" rotation="-90 90 0" static-body position = "0 0 45"></a-plane>
        <a-plane src="#ground" width="10" height="200" rotation="-90 90 0" static-body position = "0 0 -45"></a-plane>
        <!-------------------------------------------walkway-------------------------->

        <a-plane src="#bikelane" width="5" height="5" rotation="-90 0 0" static-body position = "-87.5 0.05 37.5"></a-plane>
        <a-plane color="#414d67" width="5" height="80" rotation="-90 0 0" static-body position = "-87.5 0 0"></a-plane>
        <a-plane src="#pedestrian" width="5" height="5" rotation="-90 0 0" static-body position = "-82.5 0.05 37.5"></a-plane>
        <a-plane src="#walkway" repeat = "2 10" width="5" height="24" rotation="-90 0 0" static-body position = "-82.5 0 28""></a-plane>
        <a-plane src="#walkway" repeat = "2 10" width="5" height="51" rotation="-90 0 0" static-body position = "-82.5 0 -14.5"></a-plane>
        <a-plane src="#shared" width="5" height="5" rotation="-90 -90 0" static-body position = "-82.5 0 13.5"></a-plane>

        <a-plane src="#walkway" repeat = "2 10" width="5" height="24" rotation="-90 0 0" static-body position = "-57.5 0 28"></a-plane>
        <a-plane src="#walkway" repeat = "2 10" width="5" height="31" rotation="-90 0 0" static-body position="-57.5 0 -4.5"></a-plane>
        <a-plane color="#414d67" width="5" height="60" rotation="-90 0 0" static-body position = "-52.5 0 10"></a-plane>
        <a-plane src="#shared" width="5" height="5" rotation="-90 -90 0" static-body position = "-57.5 0 13.5"></a-plane>

        <a-plane color="#414d67" width="5" height="50" rotation="-90 90 0" static-body position = "-25 0 2.5"></a-plane>
        <a-plane src="#walkway" repeat = "2 10" width="5" height="10" rotation="-90 90 0" static-body position = "-45 0 7.5"></a-plane>

        <a-plane color="#414d67" width="5" height="25" rotation="-90 180 0" static-body position = "-37.5 0 17.5"></a-plane>
        <a-plane src="#walkway" repeat = "2 10" width="5" height="20" rotation="-90 180 0" static-body position = "-32.5 0 15"></a-plane>

        <a-plane src="#walkway" repeat = "2 10" width="5" height="20" rotation="-90 90 0" static-body position = "-20 0 22.5"></a-plane>
        <a-plane color="#414d67" width="5" height="55" rotation="-90 90 0" static-body position = "-7.5 0 27.5"></a-plane>

        <a-plane src="#walkway" repeat = "2 10" width="5" height="20" rotation="-90 180 0" static-body position = "-7.5 0 15"></a-plane>
        <a-plane color="#414d67" width="5" height="20" rotation="-90 180 0" static-body position = "-2.5 0 15"></a-plane>

        <a-plane src="#walkway" repeat = "2 10" width="5" height="20" rotation="-90 90 0" static-body position = "-20 0 7.5"></a-plane>
        <a-plane src="#walkway" repeat = "2 10" width="5" height="10" rotation="-90 90 0" static-body position = "5 0 22.5"></a-plane>

        <a-plane color="#414d67" width="5" height="60" rotation="-90 0 0" static-body position = "-52.5 0 10"></a-plane>

        <a-plane src="#walkway" repeat = "2 10" width="5" height="45" rotation="-90 180 0" static-body position = "12.5 0 2.5"></a-plane>
        <a-plane color="#414d67" width="5" height="35" rotation="-90 180 0" static-body position = "17.5 0 7.5"></a-plane>

        <a-plane color="#414d67" width="5" height="20" rotation="-90 90 0" static-body position = "25 0 -12.5"></a-plane>
        <a-plane src="#walkway" repeat = "2 10" width="5" height="25" rotation="-90 90 0" static-body position = "27.5 0 -17.5"></a-plane>

        <a-plane src="#walkway" repeat = "2 10" width="5" height="32.5" rotation="-90 180 0" static-body position = "37.5 0 18.75"></a-plane>
        <a-plane src="#walkway" repeat = "2 10" width="5" height="12.5" rotation="-90 180 0" static-body position = "37.5 0 -8.75"></a-plane>
        <a-plane color="#414d67" width="5" height="50" rotation="-90 180 0" static-body position = "32.5 0 15"></a-plane>

        <a-plane src="#walkway" repeat = "2 10" width="5" height="20" rotation="-90 90 0" static-body position = "50 0 32.5"></a-plane>
        <a-plane color="#414d67" width="5" height="25" rotation="-90 90 0" static-body position = "47.5 0 37.5"></a-plane>
        <!-------------------------------------------road-------------------------->
        <a-plane src="#zebra" width="5" height="20" rotation="-90 -90 0" static-body position = "-70 0.05 13.5"></a-plane>
        <a-plane src="#road" width="20" height="60" rotation="-90 0 0" static-body position = "-70 0 10"></a-plane>
        <a-plane src="#junction" width="20" height="20" rotation="-90 0 0" static-body position = "-70 0 -30"></a-plane>
        <a-plane src="#road" width="20" height="10" rotation="-90 90 0" static-body position = "-55 0 -30"></a-plane>
        <a-plane src="#junction" width="20" height="40" rotation="-90 0 0" static-body position = "-40 0 -20"></a-plane>
        <a-plane src="#road" width="20" height="10" rotation="-90 90 0" static-body position = "-55 0 -30"></a-plane>
        <a-plane src="#road" width="20" height="10" rotation="-90 90 0" static-body position = "-55 0 -30"></a-plane>
        <a-plane src="#road" width="20" height="20" rotation="-90 90 0" static-body position = "-20 0 -10"></a-plane>
        <a-plane src="#junction" width="20" height="40" rotation="-90 0 0" static-body position = "0 0 -20"></a-plane>
        <a-plane src="#road" width="20" height="30" rotation="-90 90 0" static-body position = "25 0 -30"></a-plane>
        <a-plane src="#junction" width="20" height="20" rotation="-90 0 0" static-body position = "50 0 -30"></a-plane>
        <a-plane src="#road" width="20" height="30" rotation="-90 0 0" static-body position = "50 0 -5"></a-plane>
        <a-plane src="#junction" width="20" height="20" rotation="-90 0 0" static-body position = "50 0 20"></a-plane>
        <a-plane src="#road" width="20" height="10" rotation="-90 90 0" static-body position = "65 0 20"></a-plane>
        <a-plane src="#junction" width="20" height="20" rotation="-90 0 0" static-body position = "80 0 20"></a-plane>
        <a-plane src="#road" width="20" height="50" rotation="-90 0 0" static-body position = "80 0 -15"></a-plane>
        <a-plane src="#road" width="20" height="10" rotation="-90 0 0" static-body position = "80 0 35"></a-plane>
        <a-plane src="#zebra" width="5" height="20" rotation="-90 -90 0" static-body position = "50 0.05 0.045"></a-plane>
        <a-plane src="#shared" width="5" height="5" rotation="-90 -90 0" static-body position = "37.5 0 0"></a-plane>
        <a-plane color="#414d67" width="5" height="8" rotation="-90 90 0" static-body position = "64 0.05 0"></a-plane>
        <a-plane color="#414d67" width="5" height="45" rotation="-90 0 0" static-body position = "65.5 0.05 -24.5"></a-plane>
        <!-------------------------------------------scenery-------------------------->
        <a-plane src="#ground" width="20" height="20" rotation="-90 90 0" static-body position = "-20 0 -30"></a-plane>
        <a-plane src="#ground" width="10" height="50" rotation="-90 0 0" static-body position = "65 0 -15"></a-plane>
        <a-plane src="#ground" width="10" height="30" rotation="-90 0 0" static-body position = "-45 0 25"></a-plane>
        <a-plane src="#ground" width="10" height="70" rotation="-90 90 0" static-body position = "-5 0 35"></a-plane>
        <a-plane src="#ground" width="20" height="10" rotation="-90 0 0" static-body position = "-20 0 15"></a-plane>
        <a-plane src="#ground" width="20" height="10" rotation="-90 90 0" static-body position = "5 0 10"></a-plane>
        <a-plane src="#ground" width="10" height="40" rotation="-90 0 0" static-body position = "25 0 10"></a-plane>
        <a-plane src="#bikepark" width="10" height="10" rotation="-90 -90 0" static-body position = "65 0 35"></a-plane>

         <a-entity
            geometry="primitive: plane; width: 3; height: 2"
            position = "-85 3 40"
            material="color: blue"
            text="value: Welcome to the game! Touch the checkpoint and get to the finishing cube.                                                                   Remember to follow all traffic rules and good etiquette for riding in public.                                               Good luck!;
                align: center; ">
        </a-entity>

        <a-sky id="sky" color="#AADDF0"></a-sky>

        <!-- Lighting -->
        <a-light type="ambient" color="#ccc"></a-light>
        <!-------------------------------border obstacle------------------------->
        <a-box
            src = "#building"
            position="-95 5 27.5" width="10" height="10" depth="25"
            static-body>
        </a-box>

        <a-box
            src = "#tree"
            position="-95 2.5 5" width="5" height="5" depth="5"
            static-body>
        </a-box>

        <a-box
            src = "#tree"
            position="-95 2.5 -5" width="5" height="5" depth="5"
            static-body>
        </a-box>

        <a-box
            src = "#building"
            position="-95 5 -27.5" width="10" height="10" depth="25"
            static-body>
        </a-box>

         <a-box
            src = "#fence"
            repeat = "10 1" position="-99 1 0" width="0.5" height="2" depth="30"
            static-body >
        </a-box>
        <a-box
            src = "#building"
            position="-77.5 5 -45" rotation="0 90 0" width="10" height="10" depth="25"
            static-body>
        </a-box>
        <a-box
            src = "#grey"
            position="65 0.7 30.2" rotation="0 90 0" width="0.3" height="1.4" depth="9.5"
            static-body>
        </a-box>
        <a-box
            src = "#grey"
            position="65 0.7 39.8" rotation="0 90 0" width="0.3" height="1.4" depth="9.5"
            static-body>
        </a-box>
        <a-box
            src = "#grey"
            position="70 0.7 35" width="0.3" height="1.4" depth="9.5"
            static-body>
        </a-box>
        <a-box
            src = "#grey"
            position="60 0.7 6.2" width="0.3" height="1.4" depth="7.5"
            static-body>
        </a-box>
        <a-box
            src = "#grey"
            position="65 0.7 9.8" rotation="0 90 0" width="0.3" height="1.4" depth="9.5"
            static-body>
        </a-box>
        <a-box
            src = "#grey"
            position="60 0.7 -21.25" width="0.3" height="1.4" depth="37.5"
            static-body>
        </a-box>
        <a-box
            src = "#grey"
            position="70 0.7 -15" width="0.3" height="1.4" depth="50"
            static-body>
        </a-box>
        <a-box
            src = "#grey"
            position="60 3 -44.5" width="0.3" height="6" depth="9.5"
            static-body>
        </a-box>
        <a-box
            src = "#grey"
            position="70 3 -44.5" width="0.3" height="6" depth="9.5"
            static-body>
        </a-box>
        <a-box
            src = "#grey"
            position="65 3 -49" rotation="0 90 0" width="0.3" height="6" depth="9.5"
            static-body>
        </a-box>
        <a-box
            src = "#grey"
            position="65 6 -44.5" rotation="0 90 90" width="0.2" height="10" depth="9.5"
            static-body>
        </a-box>
        <!-------------------------------internal obstacle------------------------->
         <a-box
            src = "#slides"
            position="-23.5 2 12.5" rotation="0 90 0" width="4.5" height="5" depth="10"
            static-body>
        </a-box>
        <a-box
            src = "#swing"
            position="-15.5 2 17.5" rotation="0 90 0" width="4.5" height="5" depth="10"
            static-body>
        </a-box>
        <a-box
            src = "#tree"
            position="4.5 2.5 5.5" width="5" height="5" depth="5"
            static-body>
        </a-box>
        <a-box
            src = "#tree"
            position="4.5 2.5 15.5" width="5" height="5" depth="5"
            static-body>
        </a-box>
        <a-box
            src = "#coffee"
            position="-45.5 2.5 16" width="5" height="5" depth="10"
            static-body>
        </a-box>
        <a-box
            src = "#toy"
            position="-45.5 2.5 32" width="5" height="5" depth="10"
            static-body>
        </a-box>
        <a-box
            src = "#fence"
             repeat = "10 1"  position="-45 1 24" width="0.5" height="2" depth="6"
            static-body >
        </a-box>
        <a-box
            src = "#fence"
             repeat = "10 1" position="0 1 50" rotation="0 90 0" width="0.5" height="2" depth="200"
            static-body >
        </a-box>
        <a-box
            src = "#fence"
            repeat = "10 1"  position="-99.7 1 45" width="0.5" height="2" depth="10"
            static-body >
        </a-box>
        <a-box
            src = "#tree"
            position="-95 2.5 44.5" width="7" height="5" depth="7"
            static-body>
        </a-box>
        <a-box
            src = "#grey"
            position="-70 5 45" width="20" height="10" depth="10"
            static-body>
        </a-box>
        <a-plane src="#carpark" width="20" height="10" rotation="0 180 0" static-body position = "-70 5 39.9"></a-plane>

        <!-------------------------------non bike lane------------------------->
        <a-box class = "nonbike"
            car = "name: hitbox1"
            id = "hitbox1"
            collision = 0
            material="transparent: true; opacity: 0;"
            position="-82.5 2.5 28" width="5" height="5" depth="24"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox2"
            id = "hitbox2"
            collision = 0
            material="transparent: true; opacity: 0;"
            position="-82.5 2.5 -14.5" width="5" height="5" depth="51"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox3"
            id = "hitbox3"
            collision = 0
            material="transparent: true; opacity: 0;"
            position="-58 2.5 28" width="5" height="5" depth="24"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox4"
            id = "hitbox4"
            collision = 0
            material="transparent: true; opacity: 0;"
            position="-58 2.5 -4.5" width="5" height="5" depth="31"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox5"
            id = "hitbox5"
            collision = 0
            color="green" 
            material="transparent: true; opacity: 0;"
            rotation="0 90 0"
            position="-45 2.5 7.5" width="5" height="5" depth="10"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox6"
            id = "hitbox6"
            collision = 0
            color="green"
            material="transparent: true; opacity: 0;"
            rotation="0 90 0"
            position="-20 2.5 7.5" width="5" height="5" depth="30"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox7"
            id = "hitbox7"
            collision = 0
            color="green"
            material="transparent: true; opacity: 0;"
            rotation="0 90 0"
            position="-20 2.5 22.5" width="5" height="5" depth="30"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox8"
            id = "hitbox8"
            collision = 0
            color="green"
            material="transparent: true; opacity: 0;"
            position="-32.5 2.5 15" width="5" height="5" depth="10"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox9"
            id = "hitbox9"
            collision = 0
            color="green"
            material="transparent: true; opacity: 0;"
            position="-7.5 2.5 15" width="5" height="5" depth="10"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox10"
            id = "hitbox10"
            collision = 0
            color="green"
            rotation="0 90 0"
            material="transparent: true; opacity: 0;"
            position="7.5 2.5 22.5" width="5" height="5" depth="15"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox11"
            id = "hitbox11"
            collision = 0
            color="green"
            material="transparent: true; opacity: 0;"
            position="12.5 2 0" width="5" height="5" depth="40"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox12"
            id = "hitbox12"
            collision = 0
            color="green"
            rotation="0 90 0"
            material="transparent: true; opacity: 0;"
            position="27.5 2 -17.5" width="5" height="5" depth="25"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox13"
            id = "hitbox13"
            collision = 0
            color="green"
            material="transparent: true; opacity: 0;"
            position="37.5 2 -8.8" width="5" height="5" depth="12.5"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox14"
            id = "hitbox14"
            collision = 0
            color="green"
            material="transparent: true; opacity: 0;"
            position="37.5 2 18.7" width="5" height="5" depth="32.5"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox15"
            id = "hitbox15"
            collision = 0
            color="green"
            rotation="0 90 0"
            material="transparent: true; opacity: 0;"
            position="50 2 32.5" width="5" height="5" depth="20"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox16"
            id = "hitbox16"
            collision = 0
            color="green"
            material="transparent: true; opacity: 0;"
            position="-70 2 28" width="12" height="5" depth="24"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox17"
            id = "hitbox17"
            collision = 0
            color="green"
            material="transparent: true; opacity: 0;"
            position="-70 2 -12" width="12" height="5" depth="46"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox18"
            id = "hitbox18"
            collision = 0
            color="green"
            material="transparent: true; opacity: 0;"
            rotation="0 90 0"
            position="-48.5 2 -30" width="12" height="5" depth="30"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox19"
            id = "hitbox19"
            collision = 0
            color="green"
            material="transparent: true; opacity: 0;"
            position="-40 2 -14" width="12" height="5" depth="20"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox20"
            id = "hitbox20"
            collision = 0
            color="green"
            material="transparent: true; opacity: 0;"
            rotation="0 90 0"
            position="-14 2 -10" width="12" height="5" depth="38.5"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox21"
            id = "hitbox21"
            collision = 0
            material="transparent: true; opacity: 0;"
            color="green"
            position="-0.5 2 -26.5" width="12" height="5" depth="20"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox22"
            id = "hitbox22"
            collision = 0
            material="transparent: true; opacity: 0;"
            color="green"
            rotation="0 90 0"
            position="31 2 -30" width="12" height="5" depth="51"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox23"
            id = "hitbox23"
            collision = 0
            material="transparent: true; opacity: 0;"
            color="green"
            position="50 2 -11.5" width="12" height="5" depth="17.5"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox24"
            id = "hitbox24"
            collision = 0
            material="transparent: true; opacity: 0;"
            color="green"
            position="50 2 15" width="12" height="5" depth="25"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox25"
            id = "hitbox25"
            collision = 0
            material="transparent: true; opacity: 0;"
            color="green"
            rotation="0 90 0"
            position="65 2 20" width="12" height="5" depth="18.5"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "nonbike"
            car = "name: hitbox26"
            id = "hitbox26"
            collision = 0
            material="transparent: true; opacity: 0;"
            color="green"
            position="80 2 0" width="12" height="5" depth="80"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: green" >
        </a-box>
        <a-box class = "car"
            car = "name: bike1"
            id = "bike1"
            collision = 0
            src = "#bicycle"
            color="white"
            rotation="0 90 0"
            position="68 0.7 31" width="0.2" height="1.5" depth="2"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: white" >
        </a-box>
        <a-box class = "car"
            car = "name: bike2"
            id = "bike2"
            collision = 0
            src = "#bicycle"
            color="white"
            rotation="0 90 0"
            position="68 0.7 33.5" width="0.2" height="1.5" depth="2"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: white" >
        </a-box>
        <a-box class = "car"
            car = "name: bike3"
            id = "bike3"
            collision = 0
            color="white"
            src = "#bicycle"
            rotation="0 90 0"
            position="68 0.7 37" width="0.2" height="1.5" depth="2"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: white" >
        </a-box>
        <a-box class = "car"
            car = "name: bike4"
            id = "bike4"
            collision = 0
            color="white"
            src = "#bicycle"
            rotation="0 90 0"
            position="63.5 0.7 31" width="0.2" height="1.5" depth="2"
            event-set__hitstart="color: orange" 
            event-set__hitend="color: white" >
        </a-box>
        <a-box class = "car"
            cube = "name: cube"
            id = "cube"
            clear = 0
            color="white"
            src = "#clear"
            position="63.5 0.7 35" width="1" height="1" depth="1"
            event-set__hitstart="color: #42f48f" 
            event-set__hitend="color: #42f48f" >
            <a-animation attribute="rotation"
                dur="2000" 
                from="0 0 0" 
                to="0 360 0" 
                repeat="indefinite">
            </a-animation>
        </a-box>
        <a-box class = "car"
            flag = "name: end"
            id = "end"
            clear = 0
            color="white"
            src = "#flag"
            position="65 3 -45" width="5" height="5" depth="5"
            event-set__hitstart="color: #42f48f" 
            event-set__hitend="color: white" >
            <a-animation attribute="rotation"
                dur="2000" 
                from="0 0 0" 
                to="0 360 0" 
                repeat="indefinite">
            </a-animation>
        </a-box>
        <a-box class = "car"
            navcube = "name: tut"
            id = "tut"
            clear = 0
            color="white"
            src = "#tutorial"
            position="-88 1 45" width="1" height="1" depth="1"
            event-set__hitstart="color: #42f48f" 
            event-set__hitend="color: white" >
            <a-animation attribute="rotation"
                dur="2000" 
                from="0 0 0" 
                to="0 360 0" 
                repeat="indefinite">
            </a-animation>
        </a-box>
        <a-box class = "car"
            navcube = "name: quit"
            id = "quit"
            clear = 0
            color="white"
            src = "#exit"
            position="-82 1 45" width="1" height="1" depth="1"
            event-set__hitstart="color: #42f48f" 
            event-set__hitend="color: white" >
            <a-animation attribute="rotation"
                dur="2000" 
                from="0 0 0" 
                to="0 360 0" 
                repeat="indefinite">
            </a-animation>
        </a-box>
        <!-------------------------------movingObstacle------------------------->
        <a-entity id="movingObstacle"></a-entity>
    </a-scene>
    <!--render car-->
    <script>
        var carRotation = [25,
                           112,
                           -65,
                           24,
                           20, 
                           202,
                           -66,
                           114,
                           114,
                           114];

        var carFrom = [-75 + ' ' + -0.5 + ' ' + 43,
                       -45 + ' ' + -0.5 + ' ' + -24,
                       -2.8 + ' ' + -0.5 + ' ' + -35,
                       44 + ' ' + -0.5 + ' ' + 22,
                       75 + ' ' + -0.5 + ' ' + 15,
                       -65 + ' ' + -0.5 + ' ' + -30, 
                       -43 + ' ' + -0.5 + ' ' + -15,
                       4 + ' ' + -0.5 + ' ' + -6.5,
                       40 + ' ' + -0.5 + ' ' + -25,
                       75 + ' ' + -0.5 + ' ' + 25];

        var carTo = [-75 + ' ' + -0.5 + ' ' + -12,
                       -60 + ' ' + -0.5 + ' ' + -24,
                       46 + ' ' + -0.5 + ' ' + -35,
                       44 + ' ' + -0.5 + ' ' + -21,
                       75 + ' ' + -0.5 + ' ' + -30, 
                       -65 + ' ' + -0.5 + ' ' + 31,
                       -3.5 + ' ' + -0.5 + ' ' + -15,
                       -44 + ' ' + -0.5 + ' ' + -6.5,
                       6 + ' ' + -0.5 + ' ' + -25,
                       46 + ' ' + -0.5 + ' ' + 25];

        var carDur = [5000,2000,3000,3000,4000, 5000, 4000, 3000, 3000, 3000];

        var pedestrianFrom = [-82.5 + ' ' + 1 + ' ' + -15,
                              -50 + ' ' + 1 + ' ' + 7.5,
                              -31.5 + ' ' + 1 + ' ' + 22.5,
                              37.5 + ' ' + 1 + ' ' + -10,
                              -23.44 + ' ' + 1 + ' ' + 9,
                              -8 + ' ' + 1 + ' ' + 9,
                              11 + ' ' + 1 + ' ' + 20,
                              35 + ' ' + 1 + ' ' + 0,
                              -7 + ' ' + 1 + ' ' + 6,
                              -69 + ' ' + 1 + ' ' + 12,
                              -32 + ' ' + 1 + ' ' + 7,
                              2 + ' ' + 1 + ' ' + 22,
                              -57 + ' ' + 1 + ' ' + 8,
                              32 + ' ' + 1 + ' ' + 26,
                              -10 + ' ' + 1 + ' ' + 25];

        var pedestrianTo = [-82.5 + ' ' + 1 + ' ' + 0,
                            -45 + ' ' + 1 + ' ' + 7.5,
                            -20 + ' ' + 1 + ' ' + 22.5,
                            37.5 + ' ' + 1 + ' ' + 17.5,
                            -13 + ' ' + 1 + ' ' + 9,
                            -8 + ' ' + 1 + ' ' + 20,
                            11 + ' ' + 1 + ' ' + -16,
                            36 + ' ' + 1 + ' ' + 27,
                            -30 + ' ' + 1 + ' ' + 6.5,
                            -70 + ' ' + 1 + ' ' + 12,
                            -42 + ' ' + 1 + ' ' + 7,
                            -10 + ' ' + 1 + ' ' + 22,
                            -57 + ' ' + 1 + ' ' + 24,
                            38 + ' ' + 1 + ' ' + 37,
                            4 + ' ' + 1 + ' ' + 30];                             
        var pedestrianDur = [4000];

        var bicycleRotation = [0, 0, 90, 90, 0, 0, 90, 90, 90, 0];
        var bicycleFrom = [-82 + ' ' + 0.7 + ' ' + 1.4,
                           -52 + ' ' + 0.7 + ' ' + -2,
                           -31 + ' ' + 0.7 + ' ' + 3,
                           -32 + ' ' + 0.7 + ' ' + 27.5,
                           17 + ' ' + 0.7 + ' ' + 23,
                           32 + ' ' + 0.7 + ' ' + -3,
                           33 + ' ' + 0.7 + ' ' + 36,
                           -47 + ' ' + 0.7 + ' ' + 1.3,
                           -31 + ' ' + 0.7 + ' ' + 26,
                           33 + ' ' + 0.7 + ' ' + -3];

        var bicycleTo = [-82 + ' ' + 0.7 + ' ' + 18,
                         -52 + ' ' + 0.7 + ' ' + 18,
                         -7 + ' ' + 0.7 + ' ' + 3,
                         -12 + ' ' + 0.7 + ' ' + 27.5,
                         18 + ' ' + 0.7 + ' ' + -1.5,
                         32 + ' ' + 0.7 + ' ' + 31,
                         53 + ' ' + 0.7 + ' ' + 36,
                         -17 + ' ' + 0.7 + ' ' + 3,
                         -22 + ' ' + 0.7 + ' ' + 29,
                         33 + ' ' + 0.7 + ' ' + 20];
        var bicycleDur = [2000];
       
        document.querySelector('a-scene').addEventListener('loaded', function () {
            var platformsEl = document.querySelector('#movingObstacle');
            var v, car, animation, pedas;
            for (var i = 0;  i < 10; i++) {
                car = document.createElement('a-obj-model');
                var j = i+1;
                car.setAttribute('class', 'car');
                car.setAttribute('car', "name: car" + j);
                car.setAttribute('id', 'car' + j);
                car.setAttribute('color', 'white');
                car.setAttribute('collision', 0);
                car.setAttribute('src', '#car-obj');
                car.setAttribute('mtl', '#car-mtl');
                car.setAttribute('scale', 0.02 + ' ' + 0.02 + ' ' + 0.02);
                car.setAttribute('rotation', 0 + ' ' + carRotation[i] + ' ' + 0);
                car.setAttribute('static-body', '');
                car.setAttribute('event-set__hitstart', "color: orange");
                car.setAttribute('event-set__hitend', "color: white");
                platformsEl.appendChild(car);
               
                animation = document.createElement('a-animation');
                animation.setAttribute("attribute", "position");
                animation.setAttribute("dur", carDur[i]);
                animation.setAttribute("from", carFrom[i]);
                animation.setAttribute("to", carTo[i]);
                animation.setAttribute("repeat", "indefinite");
                carAnimation = platformsEl.querySelector("#car" + j);
                carAnimation.appendChild(animation);
            }
            for (var i = 0;  i < 15; i++) {
                pedas = document.createElement('a-box');
                var j = i+1;
                pedas.setAttribute('class', 'car');
                pedas.setAttribute('car', "name: pedestrian" + j);
                pedas.setAttribute('id', 'pedestrian' + j);
                pedas.setAttribute('color', 'white');
                pedas.setAttribute('collision', 0);
                pedas.setAttribute('src', '#walkingpedestrian');
                pedas.setAttribute('width', 1);
                pedas.setAttribute('height', 2);
                pedas.setAttribute('depth', 1);
                pedas.setAttribute('static-body', '');
                pedas.setAttribute('event-set__hitstart', "color: orange");
                pedas.setAttribute('event-set__hitend', "color: white");
                platformsEl.appendChild(pedas);
               
                animation = document.createElement('a-animation');
                animation.setAttribute("attribute", "position");
                animation.setAttribute("dur", 4000);
                animation.setAttribute("from", pedestrianFrom[i]);
                animation.setAttribute("to", pedestrianTo[i]);
                animation.setAttribute("repeat", "indefinite");
                animation.setAttribute("direction", "alternate");
                pedestrianAnimation = platformsEl.querySelector("#pedestrian" + j);
                pedestrianAnimation.appendChild(animation);
            }
            for (var i = 0;  i < 10; i++) {
                bicycle = document.createElement('a-box');
                var j = i+1;
                bicycle.setAttribute('class', 'car');
                bicycle.setAttribute('car', "name: bike" + j);
                bicycle.setAttribute('id', 'bike' + j);
                bicycle.setAttribute('color', 'white');
                bicycle.setAttribute('collision', 0);
                bicycle.setAttribute('src', '#bicycle');
                bicycle.setAttribute('width', 0.2);
                bicycle.setAttribute('height', 1.5);
                bicycle.setAttribute('depth', 2);
                bicycle.setAttribute('rotation', 0 + ' ' + bicycleRotation[i] + ' ' + 0);
                bicycle.setAttribute('static-body', '');
                bicycle.setAttribute('event-set__hitstart', "color: orange");
                bicycle.setAttribute('event-set__hitend', "color: white");
                platformsEl.appendChild(bicycle);
               
                animation = document.createElement('a-animation');
                animation.setAttribute("attribute", "position");
                animation.setAttribute("dur", 4000);
                animation.setAttribute("from", bicycleFrom[i]);
                animation.setAttribute("to", bicycleTo[i]);
                animation.setAttribute("repeat", "indefinite");
                animation.setAttribute("direction", "alternate");
                pedestrianAnimation = platformsEl.querySelector("#bike" + j);
                pedestrianAnimation.appendChild(animation);
            }
        });
    </script>
</body>
</html>